<!--<%@ page pageEncoding="UTF-8"%>-->
<!DOCTYPE html>

<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>一線影院 訂票系統</title>
    <link rel="icon" type="image/x-icon" href="source/title_icon.png" />
    <link href="css/global.css" type="text/css" rel="stylesheet" />
    <link href="css/ticket_booking.css" type="text/css" rel="stylesheet" />
    <style></style>
    <link href="css/global_dark.css" type="text/css" rel="stylesheet" />
    <script src="./jquery.js"></script>
    <script>
      var darkModeFlag = true;
      $(document).ready(init);
      function init() {
		
        if (localStorage) {
          restoreData();
          $("#dark_mode_button").click(darkModeHandler);
        } else {
          alert("不支援的瀏覽器!");
          $("#hint").text("不支援的瀏覽器!");
        }
		// TODO:從資料庫放資料上去初始化位子
		seatInitHandlr(); //初始化位子
		$("td").click(seatSelectHandlr); //點到的格子
      }
      function restoreData() {
        var getDarkModeFlag = localStorage.getItem("darkModeFlag");
        //記住深色模式
        if (getDarkModeFlag == "true") {
          darkModeFlag = getDarkModeFlag;
          darkModeHandler();
        }
      }

      function darkModeHandler() {
        if (darkModeFlag) {
          $("body").addClass("body--darkmode");
          $("#dark_mode_button").attr(
            "src",
            "source/light_mode_FILL0_wght400_GRAD0_opsz48.svg"
          );
        } else {
          $("body").removeClass("body--darkmode");
          $("#dark_mode_button").attr(
            "src",
            "source/dark_mode_FILL0_wght400_GRAD0_opsz48.svg"
          );
        }
        localStorage.setItem("darkModeFlag", darkModeFlag);
        darkModeFlag = !darkModeFlag;
      }
	  function seatSelectHandlr(e){
		var seatNumber = $(this).children("p").html();
		if((!isNaN(seatNumber))&&(seatNumber!==undefined)&&(seatNumber!==null)){
			console.log($(this).parent().attr("id"));
			console.log(seatNumber);
			console.log(typeof seatNumber);
			console.log($(this).children("img").attr("src"));

			if(($(this).children("img").attr("src")).indexOf("standard_available.png")>=0){
				$(this).children("img").attr("src","./source/standard_selected.png");
			}else if(($(this).children("img").attr("src")).indexOf("standard_selected.png")>=0){
				$(this).children("img").attr("src","./source/standard_available.png");
			}
		}
	  }
	  function seatInitHandlr(){
		$()
		seatDisplayAllLine("#seating_area");
	  }
	  function seatDisplayAllLine(id){
		var seatLineNumber;
		for(var i=0; i < ($(id).children().children().length) ; i++){
			seatLineNumber = $(id).children().children().eq(i).attr("id");
			console.log(seatLineNumber);
			seatDisplay("#"+seatLineNumber);
		}
	  }
	  function seatDisplay(id){
		// var seatNumber = $(id).children()[0];
		// console.log(seatNumber);
		var seatNumber ;
		for(var i=0; i < ($(id).children().length) ; i++){
			seatNumber = $(id).children().eq(i).children("p").html();
			if((!isNaN(seatNumber))&&(seatNumber!==undefined)&&(seatNumber!==null)){
				console.log(seatNumber);
			}
		}
	  }
    </script>
  </head>

  <body>
    <header id="menu" class="menu">
      <img
        class="menu_logo_img"
        src="source/movie_FILL0_wght400_GRAD0_opsz48.svg"
        alt="Movie_Line_Logo"
        draggable="false"
      />
      <form class="menu_search_form">
        <input
          type="search"
          name="search"
          class="menu_search_input menu_search_form_items"
          placeholder="請輸入查詢關鍵字"
        />
        <input
          type="submit"
          class="menu_search_form_button menu_search_form_items"
          value="搜尋"
        />
      </form>
      <img
        id="dark_mode_button"
        class="menu_dark_mode_button"
        src="source/dark_mode_FILL0_wght400_GRAD0_opsz48.svg"
        alt="dark_mode_button"
        draggable="false"
      />
    </header>

    <nav class="nav">
      <ul class="nav_list">
        <li class="nav_list_item"><a href="#" class="nav_list_a">Home</a></li>
        <li class="nav_list_item nav_list_last_item">
          <a href="products_list.jsp" class="nav_list_a">全部電影</a>
        </li>
      </ul>
      <ul class="nav_user">
        尚未登入
        <li class="nav_user_item nav_user_item_first">
          <a href="login.jsp" class="nav_user_a">登入</a>
        </li>
        <li class="nav_user_item">
          <a href="register.jsp" class="nav_user_a">註冊</a>
        </li>
      </ul>
    </nav>
    <article>
		<div class="seating_box">
			<img class="screan_img" src="source/SeatScreen.png" alt="">
		
      <table id = "seating_area" class="seating_area">
        <tbody>
			<tr id = "A">
				<td>
					<p>A</p>
				</td>
				<td></td><td></td>
				<td>
					<p>1</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>2</p>
					<img src="./source/standard_available.png">
				</td>
				<td></td>
				<td>
					<p>3</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>4</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>5</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>6</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>7</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>8</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>9</p>
					<img src="./source/standard_available.png">
				</td>
				<td></td>
				<td>
					<p>10</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>A</p>
				</td>
				
			</tr>
			<tr id = "B">
				<td>
					<p>B</p>
				</td>
				<td></td><td></td>
				<td>
					<p>1</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>2</p>
					<img src="./source/standard_available.png">
				</td>
				<td></td>
				<td>
					<p>3</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>4</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>5</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>6</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>7</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>8</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>9</p>
					<img src="./source/standard_available.png">
				</td>
				<td></td>
				<td>
					<p>10</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>B</p>
				</td>
				
			</tr>
			<tr id = "C">
				<td>
					<p>C</p>
				</td>
				<td></td><td></td>
				<td>
					<p>1</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>2</p>
					<img src="./source/standard_available.png">
				</td>
				<td></td>
				<td>
					<p>3</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>4</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>5</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>6</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>7</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>8</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>9</p>
					<img src="./source/standard_available.png">
				</td>
				<td></td>
				<td>
					<p>10</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>C</p>
				</td>
				
			</tr>
			<tr id = "D">
				<td>
					<p>D</p>
				</td>
				<td></td><td></td>
				<td>
					<p>1</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>2</p>
					<img src="./source/standard_available.png">
				</td>
				<td></td>
				<td>
					<p>3</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>4</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>5</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>6</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>7</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>8</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>9</p>
					<img src="./source/standard_available.png">
				</td>
				<td></td>
				<td>
					<p>10</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>D</p>
				</td>
				
			</tr>
			<tr id="E">
				<td>
					<p>E</p>
				</td>
				<td></td><td></td>
				<td>
					<p>1</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>2</p>
					<img src="./source/standard_available.png">
				</td>
				<td></td>
				<td>
					<p>3</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>4</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>5</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>6</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>7</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>8</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>9</p>
					<img src="./source/standard_available.png">
				</td>
				<td></td>
				<td>
					<p>10</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>E</p>
				</td>
				
			</tr>
			<tr id = "F">
				<td>
					<p>F</p>
				</td>
				<td></td><td></td>
				<td>
					<p>1</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>2</p>
					<img src="./source/standard_available.png">
				</td>
				<td></td>
				<td>
					<p>3</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>4</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>5</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>6</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>7</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>8</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>9</p>
					<img src="./source/standard_available.png">
				</td>
				<td></td>
				<td>
					<p>10</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>F</p>
				</td>
				
			</tr>
			<tr id = "G">
				<td>
					<p>G</p>
				</td>
				<td></td><td></td>
				<td>
					<p>1</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>2</p>
					<img src="./source/standard_available.png">
				</td>
				<td></td>
				<td>
					<p>3</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>4</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>5</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>6</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>7</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>8</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>9</p>
					<img src="./source/standard_available.png">
				</td>
				<td></td>
				<td>
					<p>10</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>G</p>
				</td>
				
			</tr>
			<tr id = "H">
				<td>
					<p>H</p>
				</td>
				<td></td><td></td>
				<td>
					<p>1</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>2</p>
					<img src="./source/standard_available.png">
				</td>
				<td></td>
				<td>
					<p>3</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>4</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>5</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>6</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>7</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>8</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>9</p>
					<img src="./source/standard_available.png">
				</td>
				<td></td>
				<td>
					<p>10</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>H</p>
				</td>
				
			</tr>
			<tr id = "I">
				<td>
					<p>I</p>
				</td>
				<td></td><td></td>
				<td>
					<p>1</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>2</p>
					<img src="./source/standard_available.png">
				</td>
				<td></td>
				<td></td>
				<td>
					<p>4</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>5</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>6</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>7</p>
					<img src="./source/standard_available.png">
				</td>
				<td></td><td></td>
				<td></td>
				<td>
					<p>10</p>
					<img src="./source/standard_available.png">
				</td>
				<td>
					<p>I</p>
				</td>
				
			</tr>
        </tbody>
      </table>
	</div>
    </article>
  </body>
</html>
